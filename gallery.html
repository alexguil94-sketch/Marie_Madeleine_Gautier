<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Galerie — Marie-Madeleine Gautier</title>

  <script>
    (function () {
      const t = localStorage.getItem("theme") || "dark";
      document.documentElement.setAttribute("data-theme", t);
    })();
  </script>

  <link rel="icon" href="/favicon.ico" />
  <link rel="stylesheet" href="css/style.css?v=1" />
  <link rel="stylesheet" href="css/luxe.css?v=1" />
</head>

<body>
  <div id="siteHeader"></div>

  <main class="page" style="padding-top:92px">
    <section class="section">
      <div class="container">
        <div class="card card-pad">
          <div class="kicker">Galerie</div>
          <h1 style="margin:10px 0 0">Œuvres</h1>
          <p class="muted" style="max-width:820px">
            Explore les œuvres, filtre par titre ou catégorie, puis clique pour agrandir.
          </p>

          <div class="hr"></div>

          <!-- Filtres -->
          <div style="display:flex; gap:10px; flex-wrap:wrap; align-items:center; margin-top:10px">
            <input id="q" class="field" type="search" placeholder="Rechercher (titre, année, catégorie)..." style="flex:1; min-width:220px" />
            <select id="cat" class="field" style="min-width:220px">
              <option value="all">Toutes les catégories</option>
            </select>
            <button id="loadMore" class="btn" type="button">Charger plus</button>
          </div>

          <!-- Grid -->
          <div id="grid" class="works-grid" style="margin-top:16px"></div>
        </div>
      </div>
    </section>
  </main>

  <!-- Lightbox -->
  <div id="lightbox" class="lightbox" aria-hidden="true" hidden>
    <div class="lightbox__panel" role="dialog" aria-modal="true" aria-label="Aperçu image">
      <div class="lightbox__top">
        <div style="display:flex; align-items:center; gap:10px; min-width:0">
          <strong id="lbTitle" style="white-space:nowrap; overflow:hidden; text-overflow:ellipsis">—</strong>
          <span id="lbCount" class="lb-count"></span>
        </div>

        <div style="display:flex; gap:8px; align-items:center">
          <button class="pill" type="button" data-zoom="out" aria-label="Zoom arrière">−</button>
          <button class="pill" type="button" data-zoom="in" aria-label="Zoom avant">+</button>
          <button class="pill" type="button" data-zoom="reset" aria-label="Réinitialiser">Reset</button>
          <button class="pill" type="button" data-close aria-label="Fermer">×</button>
        </div>
      </div>

      <div id="lbCanvas" class="lightbox__canvas">
        <img id="lbImg" alt="" draggable="false" />
        <button class="lb-nav prev" type="button" data-nav="prev" aria-label="Image précédente">‹</button>
        <button class="lb-nav next" type="button" data-nav="next" aria-label="Image suivante">›</button>
      </div>
    </div>
  </div>

  <div id="siteFooter"></div>

  <!-- ✅ Scripts (ordre clean) -->
  <script defer src="js/layout.js?v=1"></script>

  <script defer src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.js"></script>
  <script defer src="js/supabase-config.js?v=1"></script>
  <script defer src="js/supabase-client.js?v=1"></script>

  <script defer src="js/profile-ui.js?v=1"></script>

  <!-- ✅ Ta galerie -->
  <script defer src="js/gallery.js?v=1"></script>

  <script defer src="js/theme.js?v=1"></script>
  <script defer src="js/i18n.js?v=1"></script>
  <script defer src="js/app.js?v=1"></script>
  <script defer src="js/luxe.js?v=1"></script>
  
</body>
</html>
